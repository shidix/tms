{% load static i18n gestion_tags %}

<div class="col-1 d-flex align-items-center">
    {{item.view_logo}}
</div>
<div class="col-2 d-flex align-items-center">{{item.name}}</div>
<div class="col-2 d-flex align-items-center">{{item.nif}}</div>
<div class="col-1 d-flex align-items-center justify-content-center">
    <span class="badge bg-info">{{item.employees.count}}</span>
</div>
<div class="col-2 d-flex align-items-center">{{item.last_payment|date:"SHORT_DATE_FORMAT"}} ({{item.last_payment_amount}} &euro;)</div>
<div class="col-2 d-flex align-items-center">{{item.expiration_date|date:"SHORT_DATE_FORMAT"}}</div>

<div class="col-2 text-right d-flex align-items-center p-0">
    {% url 'pwa-company-login' item.uuid|default:'no-uuid-available' as login_url %}
    <a class="btn btn-xs btn-sweet-alert" data-title="Fichaje general" data-url="{{ login_url|to_main_url }}" title="{% trans 'Acceso fichaje general' %}">
        <i class="fas fa-sign-in-alt"></i></a>
    {% url 'pwa-company-private-zone' item.uuid|default:'no-uuid-available' as private_zone_url  %}

    <a class="btn btn-xs btn-sweet-alert" data-title="Acceso a la zona privada" data-url="{{ private_zone_url|to_main_url }}" title="{% trans 'Acceso a la zona privada' %}">
        <i class="fas fa-shield-alt"></i></a>
    <a class="btn btn-xs ark" data-url="{% url 'admins-form' %}" data-target-modal="common-modal" data-obj_id="{{item.id}}" >
        <i class="fas fa-edit"></i></a>
    <a class="btn btn-xs ark" data-url="{% url 'admins-remove' %}" data-target="adm-list" data-obj_id="{{item.id}}"  data-confirm="{% trans 'Are you sure to remove this element?' %}" >
        <i class="fas fa-trash"></i></a>
</div>

<script class="toremove">
    var item = $('#row_{{item.id}}');
    if (item.length === 0) {
        $('#row_New').before('<div class="row list-item pt-2 pb-2 m-0 active-False" id="row_{{item.id}}"></div>');
        item = $('#row_{{item.id}}');
        item.html($('#row_New').html());
        $('.toremove').remove();
        $('#row_New').html('');
    }
    item.removeClass('active-True').removeClass('active-False').addClass('active-{{item.is_active}}');
    item.removeClass('text-danger');
    if (item.hasClass('active-False')) {
        item.addClass('text-danger');
    }
</script>

