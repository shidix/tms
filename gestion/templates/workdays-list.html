{% load i18n gestion_tags %}

{% if gantt %}
<div id="gantt-div" >
  {% include "gantt.html" %}
</div>

  <script>
    ganttDiv = document.querySelector("#gantt-div").querySelector(".plotly-graph-div");

    ganttDiv.on('plotly_click', function(data) {
        
        const point = data.points[0];
        const uuid = point.customdata[0];
        button = $("#button-" + uuid);
        button.click();
    });



  </script>
{% endif %}


<div class="row">
{% for item in item_list %}
    <div class="col-12 col-lg-12 list-item pt-2 pb-2 m-0" id="row_{{item.id}}">
        {% include "workdays-item.html" %}
    </div>
{% endfor %}
</div>

<script>
    $(document).ready(function() 
        {
            {% if current_date %}
            $('#s_idate').val("{{current_date|date:'Y-m-d'}}");
            $('#s_edate').val("{{current_date|date:'Y-m-d'}}");
            $('.day-search').removeClass('btn-warning').addClass('btn-success');
            $('.day-{{current_date|date:'D'}}').addClass('btn-warning').removeClass('btn-success');
 
            {% else %}
            $('#s_idate').val("{{request.session.s_idate}}");
            $('#s_edate').val("{{request.session.s_edate}}");
            $('.day-search').removeClass('btn-warning').addClass('btn-success');
            // last .day-search mark as btn-warning

            $('.day-search').last().addClass('btn-warning').removeClass('btn-success');


            {% endif %}
        }
    );
</script>